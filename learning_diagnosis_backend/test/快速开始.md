# 🚀 快速开始 - 测试你的高考试卷

## 一键运行

```bash
cd learning_diagnosis_backend
python test/test_gaokao_paper.py
```

就这么简单！🎉

## 预期输出

```
================================================================================
📄 2025 高考试卷识别测试
================================================================================

发现 2 张测试图片:
  - 2025gaokao1.png
  - 2025gaokao2.png

================================================================================
[1/2] 测试: 2025gaokao1.png
================================================================================
📦 读取图片并转换为 base64...
   图片大小: 1234567 字符
🔍 调用识别服务...

... (阿里云 OCR 识别过程) ...

✅ 识别成功!
  ⏱️  耗时: 12.5 秒
  📏 图片尺寸: 2377 x 3442
  📊 识别到 15 道题目

  📋 大题分区:
     - 选择题: 10 道题
     - 填空题: 3 道题
     - 解答题: 2 道题

  📝 题目详情:
     1. [choice] 下列各组数据中,表示同一时刻的是 ( ) （4 个选项）
     2. [choice] 关于运动的描述,下列说法正确的是 ( ) （4 个选项）
     ...

================================================================================
[2/2] 测试: 2025gaokao2.png
================================================================================
...

================================================================================
📊 测试汇总
================================================================================
测试图片数: 2
成功: 2
失败: 0
识别题目总数: 25

✅ 测试结果已保存: test/test_results/gaokao_test_20250107_143022.json
================================================================================
```

## 查看详细结果

测试完成后，会生成 JSON 格式的详细报告：

```bash
# 查看最新的测试报告
cat test/test_results/gaokao_test_*.json | jq '.'

# 或用文本编辑器打开
code test/test_results/gaokao_test_*.json
```

## 报告内容

报告包含：
- ✅ 每张图片的识别状态
- ✅ 识别耗时
- ✅ 题目总数
- ✅ 每道题的详细信息（题号、题型、题干、选项）
- ✅ 大题分区信息
- ✅ 题目坐标信息

## 进阶测试

### 1. 生成 HTML 可视化报告

```bash
python test/test_paper_auto.py --html-report
```

然后打开生成的 HTML 文件：
```bash
open test/test_results/test_report_*.html
```

### 2. 测试更多图片

将你的试卷图片放到 `test/test_png` 目录：
```bash
cp ~/Downloads/my_exam.png test/test_png/
python test/test_gaokao_paper.py
```

### 3. 使用图床测试（更接近生产环境）

```bash
# 申请免费的 ImgBB API Key: https://api.imgbb.com/
python test/test_paper_auto.py --use-imgbb --imgbb-key YOUR_API_KEY --html-report
```

## 常见问题

### Q: 识别失败怎么办？

**A**: 检查以下几点：
1. `.env` 文件中的阿里云配置是否正确
2. 网络连接是否正常
3. 图片格式是否支持（PNG、JPG）
4. 图片是否清晰

### Q: 识别结果不准确？

**A**: 可能的原因：
1. 图片清晰度不够 → 使用高清扫描件
2. 试卷格式不规范 → 确保有清晰的题号
3. 包含手写内容 → OCR 对手写识别效果较差

### Q: 想测试诊断功能？

**A**: 目前的脚本专注于识别测试。诊断功能测试需要：
1. 先识别试卷
2. 手动或自动提供答案
3. 调用批量诊断 API

完整的诊断测试正在开发中！

## 下一步

1. ✅ 验证识别结果是否准确
2. ✅ 查看 JSON 报告了解详细信息
3. ✅ 尝试更多测试图片
4. ✅ 阅读[完整的自动化测试指南](./自动化测试指南.md)

---

**需要帮助？** 查看[详细文档](./自动化测试指南.md)或[功能说明](./试卷结构化识别功能说明.md)

